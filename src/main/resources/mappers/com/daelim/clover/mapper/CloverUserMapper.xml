<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.daelim.clover.user.mapper.UserMapper">
    <!--        USER SQL           -->

    <!-- 로그인-->
    <select id="getUserAccount" resultType="com.daelim.clover.user.domain.User">
        SELECT
            user_id
             ,  password
             ,  name
             ,  nickname
             ,  email
             ,  phone
             ,  sex
             ,  regdate
        FROM
            user_db
        WHERE
            user_id = #{userId}
    </select>
    <!--회원가입-->
    <insert id="saveUser" parameterType="com.daelim.clover.user.domain.User" >
        INSERT  INTO user_db
        (
         user_id
        ,  password
        ,  name
        ,  nickname
        ,  email
        ,  phone
        ,  sex
        ,  regdate
        )
        VALUES
            (
              #{userId}
            ,   #{pwd}
            ,   #{name}
            ,   #{nickname}
            ,   #{email}
            ,   #{phone}
            ,   #{sex}
            ,   sysdate()
            )
    </insert>
    
    <update id="UpdateUser"
            parameterType="com.daelim.clover.user.domain.User" >
        UPDATE user_db
        SET user_id     = #{userId}
        ,   password    =#{pwd}
        ,   nickname    =#{nickname}
        ,   name        =#{name}
        ,   email       =#{email}
        WHERE user_id   =#{userId}

    </update>

    <!--유저 정보불러오기-->
    <select id="selectionUser" resultType="com.daelim.clover.user.domain.User">
        SELECT
            name
             ,password
            , nickname
            ,email
        FROM
            user_db
        WHERE
            user_id=#{userId}
    </select>

    <!--아이디 중복검사-->
    <select id="idCheck" resultType="int">
        SELECT
            count(*)
        FROM
            user_db
        WHERE
            user_id = #{userId}
    </select>

<!--    이메일 중복검사-->
    <select id="emailCheck" resultType="int">
        SELECT
            count(*)
        FROM
            user_db
        WHERE
            email = #{email}
    </select>
</mapper>